<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:b="http://java.sun.com/jsf/html"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">

	<ui:composition template="/resources/common/commonLayout.xhtml">
	<ui:define name="content">
		<h:panelGroup id="addNewContractDiv" layout="block" styleClass="addNewContractDiv" rendered="#{contractController.renderDiv}">
			<h:form id="addAccountForm">
				<table>
					<tr>
						
						<h:inputText id="maxcontacts" value="#{contractController.maxContacts}"
							class="accountCredentials" p:placeholder="Max Contacts" required="true"
							requiredMessage="*" validatorMessage="          Range 100-5000">
							<f:ajax event="keyup" immediate="true" execute="maxContacts" render="maxlogins"/>
							<f:validateLongRange minimum="100" maximum="1000"/>
						</h:inputText>
						<h:message for="maxcontacts" styleClass="warningError"/>
						
					</tr>
					<tr>
						<h:inputText id="maxlogins" value="#{contractController.maxLogins}"
							class="accountCredentials" p:placeholder="Max Login" required="true"
							requiredMessage="*" validatorMessage="          Range 0-#{contractController.maxContacts}">
							<f:validateLongRange minimum="0" maximum="#{contractController.maxContacts}" />
						</h:inputText>
						<h:message for="maxlogins" styleClass="warningError"/>
					</tr>
					<tr>
						<h:inputText value="#{contractController.startDate}" id="startdate" p:placeholder="start date" styleClass="accountCredentials" />
					</tr>
					<tr>
						<h:inputText value="#{contractController.endDate}" id="enddate" p:placeholder="end date" styleClass="accountCredentials" />
					</tr>
					<tr>
						<h:outputLabel value="#{contractController.errorMessage}" styleClass="warningError" rendered="#{contractController.renderError}" />
					</tr>
				</table>
				<h:commandButton action="#{contractController.addContract()}"
					id="saveNewAccountButton" value="Save"
					class="newAccountBottomButton" style="left:28%;">
					<a4j:ajax execute="addAccountForm" render="contractForm:contractTable,addNewContractDiv" />
				</h:commandButton>
				
				<h:commandButton action="#{contractController.closeNewContractDiv()}" immediate="true" id="cancelAddingNewContractButton" styleClass="newAccountBottomButton" value="Cancel" style="left: 50%;">
					<a4j:ajax  execute="cancelAddingNewContractButton" render="addNewContractDiv"/>
				</h:commandButton>
			</h:form>
		</h:panelGroup>
		<div class="toolBox">
			<h:form>
				<h:commandButton id="newContractButton" action="#{contractController.openNewContractDiv()}" value="New Contract" rendered="#{loginBean.qrContact}" styleClass="addNewAccountButton">
				 <a4j:ajax execute="newContractButton" render="addNewAccountDiv"/>
				 </h:commandButton>
				<!--  <button id="addNewAccountButton" type="button" class="addNewAccountButton">
					
					<h:graphicImage class="addNewAccountImage" value="#{resource['images:addNewUserImage.png']}" />
					New Contract
				</button>-->

			</h:form>

		</div>

		<br />
		<h:panelGroup layout="block" class="dataTable">
			<h:form id="contractForm">
				<h:dataTable id="contractTable"
					class="table table-striped table-bordered table-hover table-condensed"
					value="#{contractController.contractsList}" var="contract">

					<h:column>
						<f:facet name="header">
							<center>Max Contacts</center>
						</f:facet>
						<h:outputText value="#{contract.maxContacts}"  rendered="#{!contract.editable}"/>
						<!--  <h:inputText value="#{contract.maxContacts}" rendered="#{contract.editable}"/>-->
					</h:column>

					<h:column>
						<f:facet name="header">
							<center>Max Login</center>
						</f:facet>
						<h:outputText value="#{contract.maxLogins}" rendered="#{!contract.editable}"/>
						<!--  <h:inputText value="#{contract.maxLogins}" rendered="#{contract.editable}"/>-->
					</h:column>

					<h:column>
						<f:facet name="header">
							<center>Start Date</center>
						</f:facet>
						<h:outputText value="#{contract.startDate}" rendered="#{!contract.editable}"/>
						<!--  <h:inputText value="#{contract.startDate}" id="cstartdate" rendered="#{contract.editable}"/>-->
					</h:column>
					<h:column>
						<f:facet name="header">
							<center>End Date</center>
						</f:facet>
						<h:outputText value="#{contract.endDate}" rendered="#{!contract.editable}"/>
						<!--  <h:inputText value="#{contract.endDate}" id="cenddate" rendered="#{contract.editable}"/>-->
					</h:column>
					<h:column>
						<f:facet name="header">
							<center>Status</center>
						</f:facet>
						<h:outputText value="Active" rendered="#{contract.active}"/>
						<h:outputText value="Not Active" rendered="#{!contract.active}"/>
					</h:column>
					<h:column rendered="#{loginBean.qrContact}">
						<f:facet name="header" >
							<center>Action</center>
						</f:facet>
						<h:commandLink id="edit"
							action="#{contractController.updateContract(contract)}"
							value="Edit   " rendered="#{contract.active}">
							<a4j:ajax execute="edit" render="addNewContractDiv" />
						</h:commandLink>

						<h:commandLink action="#{contractController.saveEdit(contract)}"
							value="Save   " rendered="#{contract.editable}">
							<f:ajax execute="contractForm" render="contractForm:contractTable" />
						</h:commandLink>

						<h:commandLink
							action="#{contractController.deleteContract(contract)}"
							value="Delete   " rendered="#{!contract.editable}">
							<f:ajax render="contractForm:contractTable" />
						</h:commandLink>

						<h:commandLink action="#{contractController.cancelEdit(contract)}"
							value="Cancel   " rendered="#{contract.editable}">
							<f:ajax render="contractForm:contractTable" />
						</h:commandLink>
					</h:column>
				</h:dataTable>
			</h:form>
		</h:panelGroup>
	</ui:define>
</ui:composition>
</html>